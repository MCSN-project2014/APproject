
\chapter{\label{chapter4} The \fsharp Code Generator}

The code generator module is responsible for translating the \fwap intermediate representation (AST) into compilable \fsharp programs. The module itself can be thought of as a fully working \textit{compiler} (i.e. a computer program performing a translation from a source into another target language, \cite{dragon}). The executable for this piece of software is contained within the release file \textit{funwapc.exe}. 

During this chapter, we will go through the organization of the \texttt{FSCodeGen.cs} class, in which the whole translator has been implemented.

\section{The \texttt{FSCodeGen.cs} class}

The overall design of the compiler could be intuitively explained by having a look at the method \texttt{translate(ASTNode n)}, listed below. 

\lstinputlisting[frame=trBL,firstline=70,lastline=115,caption={The \texttt{translate(ASTNode n)} method.}]{../APproject/FSCodeGenerator/FSCodeGen.cs }


Depending on the node's label, it calls the appropriate method to perform the translation and it is recursively called by a method 

